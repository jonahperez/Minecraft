<html>
<head>    
    <link rel="stylesheet" href="styles/styles.css" type="text/css">

</head>
<body>
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.20.min.js"></script>
<h1>Server Status</h1>

<div id="elliots" class="alarm_state">
Jonah's Minecraft Servers
</div>
<script language="javascript">
AWS.config.credentials = new AWS.CognitoIdentityCredentials({
    IdentityPoolId: 'us-east-1:4a03db2e-e9a7-4e73-8151-909c24ab1bff',
});
AWS.config.region='us-east-1';
var cloudwatch = new AWS.CloudWatch();
var alarms= { AlarmNames: [ 'awsroute53-IsMinecraftUp-High-Health-Check-Status' ]};

function showServerState (element,  callback) {
        cloudwatch.describeAlarms(alarms, function(err, data)
                {
                        if (err) console.log(err, err.stack); // an error occured
                        else {
                                callback(element, data.MetricAlarms[0].StateValue);
                        }
                }
        )
};

function

function setImage(element, state) {
	if(state === "OK") {
		element.innerHTML="on";
	} else {
		element.innerHTML="off";
	}
}


</script>


<table>   
    <tr><td><img src="images/mcicon.jpg" class="servericon"/></td><td>minecraft.jonahperez.com</td><td>Vanilla Minecraft server</td><td><div id="minecraftstate"/></td></tr>
    
    <tr><td><img src="images/twilight.jpg" class="servericon"/></td><td>twilight.jonahperez.com</td><td>Heavily modified server</td><td><img class="powericon" src="" alt=""/></td></tr>
    <tr><td><img src="images/lyra.jpg" alt="" class="servericon"/></td><td>lyra.jonahperez.com</td><td>Lyra's Server</td><td><img class="powericon" src="" alt=""/></td></tr>    
</table>

<a href="mods.html">Mods and instructions</a>
<script type="text/javascript">
    showServerState(document.getElementById("minecraftstate"),setImage);
</script>

</body>
</html>
