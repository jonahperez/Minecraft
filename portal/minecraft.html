<html>
<head>
</head>
<body>
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.20.min.js"></script>
<h1>Server Status</h1>

<div id="elliots" class="alarm_state">
Jonah's Minecraft Server
</div>
<script language="test/javascript">

AWS.config.update({
  region: 'us-east-1',
  credentials: new AWS.CognitoIdentityCredentials({
    AccountId: '267143213584', // your AWS account ID
    RoleArn: 'arn:aws:iam::267143213584:role/Cognito_dashboardUnauth_DefaultRole',
    IdentityPoolId: 'us-east-1:4a03db2e-e9a7-4e73-8151-909c24ab1bff'
  })
}); 
// initialize the Credentials object with our parameters
AWS.config.credentials = new AWS.CognitoIdentityCredentials(params);
var cloudwatch = new AWS.CloudWatch();
var alarms= { AlarmNames: [ 'awsroute53-IsMinecraftUp-High-Health-Check-Status' ]};

function colorServerState (element,  callback) {
        cloudwatch.describeAlarms(alarms, function(err, data)
                {
                        if (err) console.log(err, err.stack); // an error occured
                        else {
                                callback(element, data.MetricAlarms[0].StateValue);
                        }
                }
        )
};


function colorElement(element, state) {
	if(state == "OK") {
		element.style.color = "green";
	} else {
		element.style.color = "red";
	}
}

colorServerState(document.getElementById("elliots"),colorElement);


</script>
</body>
</html>
